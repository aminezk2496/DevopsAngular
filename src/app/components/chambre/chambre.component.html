<div class="row mt-4">
  <!-- Tableau des chambres avec le bloc affecté -->
  <div class="col-md-6">
    <div *ngIf="chambres.length > 0; else noData">
      <table class="table table-striped table-hover">
        <thead style="background-color: #030303; color: white;">
          <tr>
            <th>ID de Chambre</th>
            <th>Numéro de Chambre</th>
            <th>Type de Chambre</th>
            <th>Bloc Affecté</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let chambre of chambres"> 
            <td>{{ chambre.idChambre }}</td>
            <td>{{ chambre.numeroChambre }}</td>
            <td>{{ chambre.typeChambre }}</td>
            <td>{{ chambre.bloc?.nomBloc || 'Non Affecté' }}</td>
            <td>
              <button class="btn btn-sm btn-outline-primary" (click)="selectChambreForUpdate(chambre)">Mettre à jour</button>
              <button class="btn btn-sm btn-outline-danger" (click)="deleteChambre(chambre.idChambre)">Supprimer</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <ng-template #noData>
    <p class="text-muted">Aucune chambre trouvée.</p>
  </ng-template>

  <!-- Formulaires d'ajout, recherche et affectation de chambres sous forme de tableau -->
  <div class="col-md-6">
    <table class="table table-bordered" style="background-color: #f5f9fc;">
      <thead style="background-color: #000000; color: white;">
        <tr>
          <th>Opération</th>
          <th>Entrée</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <!-- Formulaire pour ajouter une chambre -->
        <tr>
          <td>Ajouter une chambre</td>
          <td>
            <input #numeroChambre type="number" class="form-control mb-1" placeholder="Numéro de chambre">
            <select [(ngModel)]="typeChambre" class="form-select">
              <option *ngFor="let type of typeChambreOptions" [ngValue]="type">{{ type }}</option>
            </select>
          </td>
          <td class="text-center">
            <button class="btn btn-secondary" (click)="addChambre(+numeroChambre.value, typeChambre)">Ajouter</button>
          </td>
        </tr>

        <!-- Formulaire pour mise à jour d'une chambre -->
        <tr *ngIf="selectedChambre && chambres.length > 0">
          <td>Mise à jour de la chambre</td>
          <td>
            <input [(ngModel)]="selectedChambre.numeroChambre" type="number" class="form-control mb-1" placeholder="Numéro de chambre">
            <select [(ngModel)]="selectedChambre.typeChambre" class="form-select">
              <option *ngFor="let type of typeChambreOptions" [ngValue]="type">{{ type }}</option>
            </select>
          </td>
          <td class="text-center">
            <button class="btn btn-success" (click)="updateChambre()">Confirmer Mise à jour</button>
          </td>
        </tr>

        <!-- Formulaire pour rechercher une chambre par ID -->
        <tr>
          <td>Recherche de chambre par ID</td>
          <td>
            <input #chambreIdInput type="number" class="form-control" placeholder="ID de la chambre">
          </td>
          <td class="text-center">
            <button class="btn btn-secondary" (click)="findChambreById(+chambreIdInput.value)">Rechercher</button>
          </td>
        </tr>

        <!-- Formulaire pour rechercher des chambres par type -->
        <tr>
          <td>Recherche de chambres par type</td>
          <td>
            <select [(ngModel)]="typeChambre" class="form-select">
              <option *ngFor="let type of typeChambreOptions" [ngValue]="type">{{ type }}</option>
            </select>
          </td>
          <td class="text-center">
            <button class="btn btn-secondary" (click)="getChambresByType()">Rechercher</button>
          </td>
        </tr>

        <!-- Formulaire pour affecter une chambre à un bloc -->
        <tr>
          <td>Affecter une chambre à un bloc</td>
          <td>
            <div class="row">
              <div class="col-md-6">
                <label for="chambreSelect">Sélectionnez la Chambre</label>
                <select id="chambreSelect" [(ngModel)]="selectedChambre" class="form-select">
                  <option *ngFor="let chambre of chambres" [ngValue]="chambre">{{ chambre.numeroChambre }}</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="blocIdInput">ID du Bloc</label>
                <input type="number" id="blocIdInput" [(ngModel)]="idBloc" class="form-control" placeholder="ID du Bloc">
              </div>
            </div>
          </td>
          <td class="text-center">
            <button class="btn btn-secondary" (click)="affecterChambreABloc(selectedChambre?.idChambre!, idBloc)">
              Affecter
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
